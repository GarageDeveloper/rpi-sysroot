<p> <span style="font-size:25px; color:white;background-color:deeppink;"><font face="HelveticaNeue-Light,Helvetica Neue Light,Helvetica Neue">Define a named value only once</font></span></p>
<h1><font color="#3c3c3c"><pre>defonce<pre></font></h1>
<h2><pre>[name <font color="deeppink">(symbol)</font>]</pre></h2>
<p><font size="4", face="HelveticaNeue-Light,Helvetica Neue Light,Helvetica Neue">
Allows you assign the result of some code to a name with the property that the code will only execute once therefore stopping re-definitions. This is useful for defining values that you use in your compositions but you don't want to reset every time you press run. You may force the block to execute again regardless of whether or not it has executed once already by using the override option (see examples).
</p>
<p><font size="3", face="HelveticaNeue-Light,Helvetica Neue Light,Helvetica Neue">
<span style="color:white;background-color:darkorange;">Introduced in v2.0
</span></p>
<table cellpadding="8">
 <tr>
   <th></th><th></th><th></th>
 </tr>
 <tr bgcolor="#F8F8F8">
  <td bgcolor="#74ACFF"><h3><pre>Example 0 </pre></h3></td>
   <td><pre>
defonce :foo do 
  sleep 1       
  puts &quot;hello&quot;
  10            
end


puts foo


puts foo



defonce :foo do
  puts &quot;you can't redefine me&quot;
  15
end

puts foo



3.times do
  play foo 
end


</pre></td>
   <td><pre>
# Define a new function called foo
# Sleep for a second in the function definition
# Print hello
# Return a value of 10
 
 
# Call foo on its own
# The run sleeps for a second and prints &quot;hello&quot; before returning 10
 
# Try it again:
# This time the run doesn't sleep or print anything out. However,  10 is still returned.
 
 
 
# Try redefining foo
 
 
 
 
# We still don't see any printing or sleeping, and the result is still 10
 
# You can use foo anywhere you would use normal code.
# For example, in a block:
 
# play 10
 



</pre></td></tr>
 <tr bgcolor="#E8E8E8">
  <td bgcolor="#B2D1FF"><h3><pre>Example 1 </pre></h3></td>
   <td><pre>
defonce :bar do
  50
end

play bar

defonce :bar do
  70
end

play bar

defonce :bar, override: true do 
  80
end

play bar



</pre></td>
   <td><pre>
 
 
 
 
# plays 50
 
# This redefinition doesn't work due to the behaviour of defonce
 
 
 
# Still plays 50
 
# Force definition to take place with override option
 
 
 
# plays 80



</pre></td></tr>
</table>