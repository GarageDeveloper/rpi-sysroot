<font face="HelveticaNeue-Light,Helvetica Neue Light,Helvetica Neue">


<p style="font-size:15px;color:#5e5e5e;"> <span style="font-size:25px; color:white;background-color:deeppink;">Multiple Live Loops</span></p>

<p style="font-size:15px;color:#5e5e5e;">Consider the following live loop:</p>

<pre><code style="font-size:15px; color:deeppink; background-color:white">live_loop :foo do
  play 50
  sleep 1
end
</code></pre>

<p style="font-size:15px;color:#5e5e5e;">You may have wondered why it needs the name <code style="font-size:15px; color:deeppink; background-color:white">:foo</code>. This name is
important because it signifies that this live loop is different from all
other live loops. </p>

<p style="font-size:15px;color:#5e5e5e;"><em style="font-size:15px;color:darkorange;">There can never be two live loops running with the same name</em>.</p>

<p style="font-size:15px;color:#5e5e5e;">This means that if we want multiple concurrently running live loops, we
just need to give them different names:</p>

<pre><code style="font-size:15px; color:deeppink; background-color:white">live_loop :foo do
  use_synth :prophet
  play :c1, release: 8, cutoff: rrand(70, 130)
  sleep 8
end

live_loop :bar do
  sample :bd_haus
  sleep 0.5
end
</code></pre>

<p style="font-size:15px;color:#5e5e5e;">You can now update and change each live loop independently and it all
just works.</p>

<br><p style="font-size:15px;color:#5e5e5e;"><span style="font-size:20px; color:white; background-color:dodgerblue;">Syncing Live Loops</span></p>

<p style="font-size:15px;color:#5e5e5e;">One thing you might have already noticed is that live loops work
automatically with the thread cue mechanism we explored
previously. Every time the live loop loops, it generates a new <code style="font-size:15px; color:deeppink; background-color:white">cue</code>
event with the name of the live loop. We can therefore <code style="font-size:15px; color:deeppink; background-color:white">sync</code> on these
cues to ensure our loops are in sync without having to stop anything.</p>

<p style="font-size:15px;color:#5e5e5e;">Consider this badly synced code:</p>

<pre><code style="font-size:15px; color:deeppink; background-color:white">live_loop :foo do
  play :e4, release: 0.5
  sleep 0.4
end

live_loop :bar do
  sample :bd_haus
  sleep 1
end
</code></pre>

<p style="font-size:15px;color:#5e5e5e;">Let’s see if we can fix the timing and sync without stopping it. First,
let’s fix the <code style="font-size:15px; color:deeppink; background-color:white">:foo</code> loop to make the sleep a factor of 1 - something like
<code style="font-size:15px; color:deeppink; background-color:white">0.5</code> will do:</p>

<pre><code style="font-size:15px; color:deeppink; background-color:white">live_loop :foo do
  play :e4, release: 0.5
  sleep 0.5
end

live_loop :bar do
  sample :bd_haus
  sleep 1
end
</code></pre>

<p style="font-size:15px;color:#5e5e5e;">We’re not quite finished yet though - you’ll notice that the beats don’t
quite line up correctly. This is because the loops are <em style="font-size:15px;color:darkorange;">out of
phase</em>. Let’s fix that by syncing one to the other:</p>

<pre><code style="font-size:15px; color:deeppink; background-color:white">live_loop :foo do
  play :e4, release: 0.5
  sleep 0.5
end

live_loop :bar do
  sync :foo
  sample :bd_haus
  sleep 1
end
</code></pre>

<p style="font-size:15px;color:#5e5e5e;">Wow, everything is now perfectly in time - all without stopping.</p>

<p style="font-size:15px;color:#5e5e5e;">Now, go forth and live code with live loops!</p>
</font>