<font face="HelveticaNeue-Light,Helvetica Neue Light,Helvetica Neue">

<p style="font-size:15px;color:#5e5e5e;"> <span style="font-size:25px; color:white;background-color:deeppink;">Enveloped Samples</span></p>

<p style="font-size:15px;color:#5e5e5e;">It is also possible to modify the <em style="font-size:15px;color:darkorange;">duration</em> and <em style="font-size:15px;color:darkorange;">amplitude</em> of a sample using an ADSR envelope. However, this works slightly differently to the ADSR envelope available on synths. Sample envelopes only allow you to reduce the amplitude and duration of a sample - and never to increase it. The sample will stop when either the sample has finished playing or the envelope has completed - whichever is first. So, if you use a very long <code style="font-size:15px; color:deeppink; background-color:white">release:</code>, it won’t extend the duration of the sample.</p>

<br><p style="font-size:15px;color:#5e5e5e;"><span style="font-size:20px; color:white; background-color:dodgerblue;">Amen Envelopes</span></p>

<p style="font-size:15px;color:#5e5e5e;">Let’s return to our trusty friend the Amen Break:</p>

<pre><code style="font-size:15px; color:deeppink; background-color:white">sample :loop_amen
</code></pre>

<p style="font-size:15px;color:#5e5e5e;">With no parameters, we hear the full sample at full amplitude. If we want to fade this in over 1 second we can use the <code style="font-size:15px; color:deeppink; background-color:white">attack:</code> param:</p>

<pre><code style="font-size:15px; color:deeppink; background-color:white">sample :loop_amen, attack: 1
</code></pre>

<p style="font-size:15px;color:#5e5e5e;">For a shorter fade in, choose a shorter attack value:</p>

<pre><code style="font-size:15px; color:deeppink; background-color:white">sample :loop_amen, attack: 0.3
</code></pre>

<br><p style="font-size:15px;color:#5e5e5e;"><span style="font-size:20px; color:white; background-color:dodgerblue;">Auto Sustain</span></p>

<p style="font-size:15px;color:#5e5e5e;">Where the ADSR envelope’s behaviour differs from the standard synth envelope is in the <em style="font-size:15px;color:darkorange;">sustain</em> value. In the standard synth envelope, the sustain defaulted to 0 unless you set it manually. With samples, the sustain value defaults to an <em style="font-size:15px;color:darkorange;">automagical</em> value - the time left to play the rest of the sample. This is why we hear the full sample when we pass no defaults. If the attack, decay,  sustain and release values were all 0 we’d never hear a peep. Sonic Pi therefore calculates how long the sample is, deducts any attack, decay and release times and uses the result as your sustain time. If the attack, decay and release values add up to more than the duration of the sample, the sustain is simply set to 0.</p>

<br><p style="font-size:15px;color:#5e5e5e;"><span style="font-size:20px; color:white; background-color:dodgerblue;">Fade Outs</span></p>

<p style="font-size:15px;color:#5e5e5e;">To explore this, let’s consider our Amen break in more detail. If we ask Sonic Pi how long the sample is:</p>

<pre><code style="font-size:15px; color:deeppink; background-color:white">print sample_duration :loop_amen
</code></pre>

<p style="font-size:15px;color:#5e5e5e;">It will print out <code style="font-size:15px; color:deeppink; background-color:white">1.753310657596372</code> which is the length of the sample in seconds. Let’s just round that to <code style="font-size:15px; color:deeppink; background-color:white">1.75</code> for convenience. Now, if we set the release to <code style="font-size:15px; color:deeppink; background-color:white">0.75</code> something surprising will happen:</p>

<pre><code style="font-size:15px; color:deeppink; background-color:white">sample :loop_amen, release: 0.75
</code></pre>

<p style="font-size:15px;color:#5e5e5e;">It will play the first second of the sample at full amplitude before then fading out over a period of 0.75 seconds. This is the <em style="font-size:15px;color:darkorange;">auto sustain</em> in action. By default, the release always works from the end of the sample. If our sample was 10.75 seconds long, it would play the first 10 seconds at full amplitude before fading out over 0.75s.</p>

<p style="font-size:15px;color:#5e5e5e;">Remember by default, <code style="font-size:15px; color:deeppink; background-color:white">release:</code> fades out at the end of a sample.</p>

<br><p style="font-size:15px;color:#5e5e5e;"><span style="font-size:20px; color:white; background-color:dodgerblue;">Fade In and Out</span></p>

<p style="font-size:15px;color:#5e5e5e;">We can use both <code style="font-size:15px; color:deeppink; background-color:white">attack:</code> and <code style="font-size:15px; color:deeppink; background-color:white">release:</code> together with the auto sustain behaviour to fade both in and out over the duration of the sample:</p>

<pre><code style="font-size:15px; color:deeppink; background-color:white">sample :loop_amen, attack: 0.75, release: 0.75
</code></pre>

<p style="font-size:15px;color:#5e5e5e;">As the full duration of the sample is 1.75s and our attack and release phases add up to 1.5s, the sustain is automatically set to 0.25s. This allows us to easily fade the sample in and out.</p>

<br><p style="font-size:15px;color:#5e5e5e;"><span style="font-size:20px; color:white; background-color:dodgerblue;">Explicit sustain</span></p>

<p style="font-size:15px;color:#5e5e5e;">We can easily get back to our normal synth ADSR behaviour by manually setting <code style="font-size:15px; color:deeppink; background-color:white">sustain:</code> to a value such as 0:</p>

<pre><code style="font-size:15px; color:deeppink; background-color:white">sample :loop_amen, sustain: 0, release: 0.75
</code></pre>

<p style="font-size:15px;color:#5e5e5e;">Now, our sample only plays for 0.75 seconds in total. With the default for <code style="font-size:15px; color:deeppink; background-color:white">attack:</code> and <code style="font-size:15px; color:deeppink; background-color:white">decay:</code> at 0, the sample jumps straight to full amplitude, sustains there for 0s then releases back down to 0 amplitude over the release period - 0.75s.</p>

<br><p style="font-size:15px;color:#5e5e5e;"><span style="font-size:20px; color:white; background-color:dodgerblue;">Percussive cymbals</span></p>

<p style="font-size:15px;color:#5e5e5e;">We can use this behaviour to good effect to turn longer sounding samples into shorter more percussive versions. Consider the sample <code style="font-size:15px; color:deeppink; background-color:white">:drum_cymbal_open</code>:</p>

<pre><code style="font-size:15px; color:deeppink; background-color:white">sample :drum_cymbal_open
</code></pre>

<p style="font-size:15px;color:#5e5e5e;">You can hear the cymbal sound ringing out over a period of time. However, we can use our envelope to make it more percussive:</p>

<pre><code style="font-size:15px; color:deeppink; background-color:white">sample :drum_cymbal_open, attack: 0.01, sustain: 0, release: 0.1
</code></pre>

<p style="font-size:15px;color:#5e5e5e;">You can then emulate hitting the cymbal and then dampening it by increasing the sustain period:</p>

<pre><code style="font-size:15px; color:deeppink; background-color:white">sample :drum_cymbal_open, attack: 0.01, sustain: 0.3, release: 0.1
</code></pre>

<p style="font-size:15px;color:#5e5e5e;">Now go and have fun putting envelopes over the samples. Try changing the rate too for really interesting results.</p>

</font>